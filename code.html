<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Snake Game</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            overflow: hidden;
        }

        .game-container {
            position: relative;
            background: #2a2a2a;
            border: 4px solid #4a4a4a;
            border-radius: 15px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.4);
            padding: 20px;
        }

        .game-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            color: #fff;
        }

        .score {
            font-size: 24px;
            font-weight: bold;
            color: #00ff88;
            text-shadow: 0 0 10px rgba(0,255,136,0.5);
        }

        .high-score {
            font-size: 18px;
            color: #ffd700;
            text-shadow: 0 0 10px rgba(255,215,0,0.5);
        }

        .game-board {
            width: 480px;
            height: 480px;
            background: #1a1a1a;
            border: 2px solid #333;
            border-radius: 8px;
            position: relative;
            overflow: hidden;
        }

        .snake-segment {
            position: absolute;
            width: 24px;
            height: 24px;
            background: linear-gradient(45deg, #00ff88, #00cc6a);
            border-radius: 4px;
            border: 1px solid #00aa55;
            box-shadow: 0 0 8px rgba(0,255,136,0.3);
        }

        .snake-head {
            background: linear-gradient(45deg, #ff6b6b, #ee5a52);
            border: 1px solid #cc4444;
            box-shadow: 0 0 8px rgba(255,107,107,0.4);
        }

        .food {
            position: absolute;
            width: 24px;
            height: 24px;
            background: linear-gradient(45deg, #ffd93d, #ff6b6b);
            border-radius: 50%;
            border: 2px solid #ffaa00;
            box-shadow: 0 0 15px rgba(255,217,61,0.6);
            animation: pulse 1s ease-in-out infinite alternate;
        }

        @keyframes pulse {
            from { transform: scale(1); }
            to { transform: scale(1.1); }
        }

        .game-over {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0,0,0,0.95);
            color: white;
            padding: 40px;
            border-radius: 15px;
            text-align: center;
            border: 2px solid #ff6b6b;
            box-shadow: 0 0 30px rgba(255,107,107,0.5);
            display: none;
        }

        .game-over h2 {
            color: #ff6b6b;
            margin-bottom: 15px;
            font-size: 32px;
            text-shadow: 0 0 10px rgba(255,107,107,0.5);
        }

        .game-over p {
            margin-bottom: 25px;
            font-size: 18px;
            color: #ccc;
        }

        .restart-btn {
            background: linear-gradient(45deg, #00ff88, #00cc6a);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 18px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .restart-btn:hover {
            background: linear-gradient(45deg, #00cc6a, #00aa55);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,255,136,0.4);
        }

        .start-screen {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0,0,0,0.95);
            color: white;
            padding: 40px;
            border-radius: 15px;
            text-align: center;
            border: 2px solid #00ff88;
            box-shadow: 0 0 30px rgba(0,255,136,0.5);
        }

        .start-screen h1 {
            color: #00ff88;
            margin-bottom: 20px;
            font-size: 36px;
            text-shadow: 0 0 15px rgba(0,255,136,0.5);
        }

        .start-screen p {
            margin-bottom: 25px;
            font-size: 16px;
            color: #ccc;
            line-height: 1.5;
        }

        .start-btn {
            background: linear-gradient(45deg, #00ff88, #00cc6a);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 18px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .start-btn:hover {
            background: linear-gradient(45deg, #00cc6a, #00aa55);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,255,136,0.4);
        }

        .controls {
            margin-top: 15px;
            color: #888;
            font-size: 14px;
            text-align: center;
        }

        .controls-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 5px;
            max-width: 120px;
            margin: 10px auto;
        }

        .control-key {
            background: #333;
            color: #fff;
            padding: 8px;
            border-radius: 4px;
            font-size: 12px;
            text-align: center;
            border: 1px solid #555;
        }

        .control-key:nth-child(2) { grid-column: 2; }
        .control-key:nth-child(3) { grid-column: 1; grid-row: 2; }
        .control-key:nth-child(4) { grid-column: 2; grid-row: 2; }
        .control-key:nth-child(5) { grid-column: 3; grid-row: 2; }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="game-header">
            <div class="score" id="score">Score: 0</div>
            <div class="high-score" id="highScore">High Score: 0</div>
        </div>
        
        <div class="game-board" id="gameBoard">
            <div class="start-screen" id="startScreen">
                <h1>üêç Snake Game</h1>
                <p>Eat the food to grow longer!<br>Don't hit the walls or yourself!</p>
                <button class="start-btn" onclick="startGame()">Start Game</button>
                <div class="controls">
                    <p>Use arrow keys or WASD to move:</p>
                    <div class="controls-grid">
                        <div class="control-key">‚Üë W</div>
                        <div class="control-key">‚Üê A</div>
                        <div class="control-key">‚Üì S</div>
                        <div class="control-key">‚Üí D</div>
                    </div>
                </div>
            </div>
            
            <div class="game-over" id="gameOver">
                <h2>Game Over!</h2>
                <p>Final Score: <span id="finalScore">0</span></p>
                <p id="newHighScore" style="color: #ffd700; display: none;">üéâ New High Score! üéâ</p>
                <button class="restart-btn" onclick="restartGame()">Play Again</button>
            </div>
        </div>
    </div>

    <script>
        const gameBoard = document.getElementById('gameBoard');
        const scoreElement = document.getElementById('score');
        const highScoreElement = document.getElementById('highScore');
        const gameOverScreen = document.getElementById('gameOver');
        const startScreen = document.getElementById('startScreen');
        const finalScoreElement = document.getElementById('finalScore');
        const newHighScoreElement = document.getElementById('newHighScore');

        const BOARD_SIZE = 20; // 20x20 grid
        const CELL_SIZE = 24;

        let snake = [{x: 10, y: 10}];
        let direction = {x: 0, y: 0};
        let food = {x: 15, y: 15};
        let score = 0;
        let highScore = localStorage.getItem('snakeHighScore') || 0;
        let gameRunning = false;
        let gameSpeed = 150;

        // Initialize high score display
        highScoreElement.textContent = `High Score: ${highScore}`;

        function createSnakeElement(segment, isHead = false) {
            const element = document.createElement('div');
            element.className = isHead ? 'snake-segment snake-head' : 'snake-segment';
            element.style.left = segment.x * CELL_SIZE + 'px';
            element.style.top = segment.y * CELL_SIZE + 'px';
            return element;
        }

        function createFoodElement() {
            const element = document.createElement('div');
            element.className = 'food';
            element.style.left = food.x * CELL_SIZE + 'px';
            element.style.top = food.y * CELL_SIZE + 'px';
            return element;
        }

        function generateFood() {
            do {
                food = {
                    x: Math.floor(Math.random() * BOARD_SIZE),
                    y: Math.floor(Math.random() * BOARD_SIZE)
                };
            } while (snake.some(segment => segment.x === food.x && segment.y === food.y));
        }

        function updateDisplay() {
            // Clear board
            const elements = gameBoard.querySelectorAll('.snake-segment, .food');
            elements.forEach(el => el.remove());

            // Draw snake
            snake.forEach((segment, index) => {
                const element = createSnakeElement(segment, index === 0);
                gameBoard.appendChild(element);
            });

            // Draw food
            const foodElement = createFoodElement();
            gameBoard.appendChild(foodElement);

            // Update score
            scoreElement.textContent = `Score: ${score}`;
        }

        function moveSnake() {
            if (!gameRunning) return;

            const head = {x: snake[0].x + direction.x, y: snake[0].y + direction.y};

            // Check wall collision
            if (head.x < 0 || head.x >= BOARD_SIZE || head.y < 0 || head.y >= BOARD_SIZE) {
                endGame();
                return;
            }

            // Check self collision
            if (snake.some(segment => segment.x === head.x && segment.y === head.y)) {
                endGame();
                return;
            }

            snake.unshift(head);

            // Check food collision
            if (head.x === food.x && head.y === food.y) {
                score += 10;
                generateFood();
                
                // Increase speed slightly
                if (gameSpeed > 80) {
                    gameSpeed -= 2;
                }
            } else {
                snake.pop();
            }

            updateDisplay();
        }

        function changeDirection(newDirection) {
            // Prevent reversing into itself
            if (direction.x === -newDirection.x && direction.y === -newDirection.y) {
                return;
            }
            
            // Only change direction if snake is moving
            if (direction.x !== 0 || direction.y !== 0) {
                direction = newDirection;
            }
        }

        function startGame() {
            gameRunning = true;
            startScreen.style.display = 'none';
            gameOverScreen.style.display = 'none';
            
            // Reset game state
            snake = [{x: 10, y: 10}];
            direction = {x: 1, y: 0}; // Start moving right
            score = 0;
            gameSpeed = 150;
            
            generateFood();
            updateDisplay();
            gameLoop();
        }

        function endGame() {
            gameRunning = false;
            
            // Check for new high score
            let isNewHighScore = false;
            if (score > highScore) {
                highScore = score;
                localStorage.setItem('snakeHighScore', highScore);
                highScoreElement.textContent = `High Score: ${highScore}`;
                isNewHighScore = true;
            }
            
            finalScoreElement.textContent = score;
            newHighScoreElement.style.display = isNewHighScore ? 'block' : 'none';
            gameOverScreen.style.display = 'block';
        }

        function restartGame() {
            startGame();
        }

        function gameLoop() {
            if (!gameRunning) return;
            
            moveSnake();
            setTimeout(gameLoop, gameSpeed);
        }

        // Event listeners
        document.addEventListener('keydown', (e) => {
            if (!gameRunning) return;
            
            switch(e.key) {
                case 'ArrowUp':
                case 'w':
                case 'W':
                    e.preventDefault();
                    changeDirection({x: 0, y: -1});
                    break;
                case 'ArrowDown':
                case 's':
                case 'S':
                    e.preventDefault();
                    changeDirection({x: 0, y: 1});
                    break;
                case 'ArrowLeft':
                case 'a':
                case 'A':
                    e.preventDefault();
                    changeDirection({x: -1, y: 0});
                    break;
                case 'ArrowRight':
                case 'd':
                case 'D':
                    e.preventDefault();
                    changeDirection({x: 1, y: 0});
                    break;
            }
        });

        // Initialize display
        updateDisplay();
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'97bd42fbc144c976',t:'MTc1NzMyMjA5MS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
